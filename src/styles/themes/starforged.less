@import './starforged-font.css'; // HACK to avoid import error
@import '../mixins.less';

body.theme-starforged {
  @theme-font: 'Carrois Gothic SC', sans-serif;

  @bg-dark-color: hsla(180, 50%, 40%, 0.2);
  @bg-muted-color: hsla(180, 75%, 27%, 0.6);
  @bg-medium-color: hsla(180, 50%, 40%, 0.6);
  @bg-light-color: hsla(180, 43%, 53%, 0.6);

  @fg-dark-color: hsl(180, 50%, 40%);
  @fg-medium-color: hsl(180, 71%, 53%);
  @fg-light-color: hsl(180, 100%, 70%);

  --ironsworn-dark-overlay: hsla(0, 0%, 0%, 0.8);

  --ironsworn-color-light: @fg-medium-color;
  --ironsworn-color-dark: hsl(0, 0%, 0%);

  --ironsworn-color-fg: var(--ironsworn-color-light);
  --ironsworn-color-bg: black;

  --ironsworn-color-thematic: hsl(180, 75%, 27%);
  // decomposed HSL color components, for use in interpolating colors from vanilla CSS variables. see "--ironsworn-color-thematic-faded" in styles.less for an example.
  --ironsworn-color-thematic-HSL: 180, 75%, 27%;
  --ironsworn-color-thematic-HS: 180, 75%;

  // see clickable.less for usage
  --ironsworn-color-clickable-text: @fg-dark-color;
  --ironsworn-color-clickable-block-bg: var(--ironsworn-color-bg);
  --ironsworn-color-clickable-block-fg: @fg-dark-color;

  --ironsworn-color-clickable-text-selected: @fg-light-color;
  --ironsworn-color-clickable-block-bg-selected: var(
    --ironsworn-color-thematic
  );
  --ironsworn-color-clickable-block-fg-selected: @fg-light-color;
  --ironsworn-color-clickable-block-border-selected: @fg-light-color;

  --ironsworn-color-clickable-text-hover: @fg-light-color;
  --ironsworn-color-clickable-block-bg-hover: var(
    --ironsworn-color-thematic-faded
  );
  --ironsworn-color-clickable-block-fg-hover: @fg-light-color;
  --ironsworn-color-clickable-block-border-hover: @fg-light-color;

  --ironsworn-color-border: @fg-dark-color;
  --ironsworn-color-text-outline: $--ironsworn-color-bg;

  .hover-fx(@spread_box:5px,@spread_text:10px) {
    &:hover {
      &.block {
        box-shadow: 0 0 @spread_box @bg-light-color;
      }
      &.text {
        text-shadow: 0 0 @spread_text @bg-light-color;
      }
      color: @fg-light-color;
    }
  }

  --ironsworn-color-thematic: hsl(180, 75%, 27%);

  --ironsworn-color-bg: hsl(0, 0%, 0%);
  --ironsworn-color-border: @fg-medium-color;

  --ironsworn-color-legacy-quests: var(--ironsworn-color-red-3);
  --ironsworn-color-legacy-bonds: var(--ironsworn-color-purple-3);
  --ironsworn-color-legacy-discoveries: var(--ironsworn-color-blue-3);

  --ironsworn-color-danger: hsl(0, 80%, 50%);
  --ironsworn-color-success: hsl(290, 80%, 50%);
  --ironsworn-color-success-faded: hsl(290, 80%, 60%);

  --ironsworn-dice-background: darken(@fg-dark-color, 20);
  --path-hexagon: polygon(0 25%, 50% 0, 100% 25%, 100% 75%, 50% 100%, 0 75%);

  body {
    font-family: @theme-font;
  }

  .app {
    color: @fg-medium-color;
  }

  input::placeholder {
    color: @bg-medium-color;
  }

  input.highlight:focus {
    box-shadow: 0 0 5px orange;
    background-color: @bg-medium-color;
    color: @fg-light-color;
  }

  ::-webkit-scrollbar-thumb {
    background: @bg-dark-color;
    border-color: @bg-medium-color;
  }

  .window-app,
  .journal-entry .journal-entry-content {
    background: initial;
    background-color: var(--ironsworn-color-bg);
    border: 1px solid @fg-dark-color;
  }

  .editor {
    color: @fg-medium-color;
    background-color: var(--ironsworn-color-bg);
  }

  .ProseMirror {
    background-color: @bg-dark-color;
    padding: 0.5rem;
  }

  .tox .tox-editor-header,
  .tox .tox-toolbar-overlord,
  .tox .tox-toolbar__primary {
    background-color: var(--ironsworn-color-bg);
  }

  font-family: @theme-font;
  color: @fg-medium-color;
  .dialog-buttons {
    .dialog-button {
      color: currentColor;
    }
  }
  select {
    border-color: @bg-dark-color;
    color: @fg-medium-color;
  }

  h2,
  h3 {
    color: @fg-medium-color;
    border-bottom-color: @bg-light-color;
  }

  .inline-roll {
    background: @bg-dark-color;
    border-color: @bg-light-color;

    &:hover {
      text-shadow: 0 0 8px @fg-medium-color;
    }
  }

  .window-content {
    background: var(--ironsworn-color-bg);
    background-image: none;
    color: @fg-medium-color;
  }

  input,
  textarea,
  textarea#chat-message {
    background: @bg-dark-color;
    border: 0;
    color: @fg-medium-color;

    &:focus {
      box-shadow: 0 0 10px @bg-light-color;
      cursor: pointer;
    }
  }

  .sheet-area {
    border-color: @bg-light-color;
  }
  svg {
    color: @fg-medium-color;
  }
  .clickable:not(svg):not(.svg) {
    &.hover,
    &:hover,
    &:focus {
      &.block {
        .fake-stroke();
      }
      &.text:not(.block) {
        box-shadow: none;
        // filter: drop-shadow(0 0 4px @text-light-color);
      }
    }
    &.selected,
    &[aria-selected='true'] {
      &.block {
        .fake-stroke();
      }
      &.block,
      &.text {
      }
    }
  }

  .drag-highlight {
    background: @bg-medium-color;
  }

  .stats {
    .stat {
      border-color: @fg-medium-color;
    }
  }

  hr {
    border-color: @bg-light-color;
  }

  .entity-link,
  .content-link {
    background-color: @bg-dark-color;
    border-color: @bg-medium-color;
    color: @fg-medium-color;
    i {
      color: @fg-light-color;
    }
  }

  .movesheet-row.highlighted {
    background-color: @bg-muted-color;
  }

  .compact {
    .bordergroup {
      border-color: @bg-light-color;
    }
  }

  .asset-ironsworn .asset-ability:before {
    border: 1px solid @fg-medium-color;
  }
  .asset-starforged .asset-ability:before {
    background-color: @fg-medium-color;
    border: 1px solid @fg-medium-color;
  }

  .ironsworn-roll {
    .roll {
      // background-image: url('systems/foundry-ironsworn/assets/icons/d6-blank.svg');
    }
  }

  // button,
  button {
    .hover-fx();
  }
  .prosemirror button,
  .tox .tox-tbtn--bespoke {
    background-color: @bg-dark-color;
    color: @fg-medium-color;
    border-color: @bg-muted-color;
    .hover-fx();
  }

  select {
    background-color: @bg-dark-color;
  }

  input[type='checkbox'] {
    background-color: @bg-dark-color;
  }

  table {
    border-color: @bg-muted-color;
  }

  .chat-message {
    background: var(--ironsworn-dark-overlay);
    border-color: @bg-muted-color;
    color: @fg-medium-color;

    .message-header {
      color: @fg-dark-color;
    }

    .message-content {
      border: 1px solid @fg-dark-color;
    }

    .dice-formula,
    .dice-total {
      background: var(--ironsworn-dark-overlay);
      // color: @text-light-color;
      border-width: 0px;
      padding: 5px 0px 5px 0px;
      .die {
        &.d6 {
          // background-image: url('systems/foundry-ironsworn/assets/icons/d6-blank.svg');
        }
        &.d10 {
          // background-image: url('systems/foundry-ironsworn/assets/icons/d10-blank.svg');
        }

        &.min {
          color: @fg-medium-color;
        }
        &.max {
          color: @fg-medium-color;
        }
      }
    }

    table tr {
      &.selected,
      &[aria-selected='true'] {
        background-color: @bg-medium-color;
        color: @fg-light-color;

        .entity-link,
        .content-link {
          color: @fg-light-color;
        }
      }
    }
  }

  #sidebar-tabs {
    border-color: @bg-medium-color;
    box-shadow: 0 0 10px @bg-light-color;

    .item {
      color: @fg-dark-color;
      &.active {
        color: @fg-light-color;
        border-color: @bg-medium-color;
        box-shadow: 0 0 6px inset @bg-light-color;
        text-shadow: 0 0 10px @bg-light-color;
      }
    }
  }

  #chat-controls {
    .roll-type-select {
      background-color: @bg-dark-color;
    }
  }

  .directory {
    .directory-header .header-search input {
      background-color: @bg-dark-color;
    }
  }
}
