@import './starforged-font.css'; // HACK to avoid import error
@import '../mixins.less';
@import '../fvtt/vars.less';

.system-foundry-ironsworn.theme-starforged {
  @import '../fvtt/app.less';
  @import '../fvtt/clickable.less';
  @import '../fvtt/sidebar.less';
  @import '../fvtt/inputs.less';

  --font-primary: 'Carrois Gothic SC', sans-serif;
  @themeLightHue: 185;
  @themeLightSaturation: 70%;
  @themeLightLightness: 55%;
  @themeDarkHue: @themeLightHue;
  @themeDarkSaturation: 0%;
  @themeDarkLightness: 0%;

  // muted fg + alt bg should meet WCAG contrast

  --ironsworn-color-light: hsl(
    @themeLightHue,
    @themeLightSaturation,
    @themeLightLightness
  );
  --ironsworn-color-dark: hsl(
    @themeDarkHue,
    @themeDarkSaturation,
    @themeDarkLightness
  );
  --ironsworn-color-accent: hsl((@themeLightHue+10), 100%, 50%);
  --ironsworn-color-accent-alt: hsl((@themeLightHue+35), 100%, 50%);

  --ironsworn-color-light-muted: mix(
    $--ironsworn-color-light,
    $--ironsworn-color-dark,
    70%
  );
  --ironsworn-color-light-vivid: lighten(
    saturate($--ironsworn-color-light, 20%, relative),
    50%,
    relative
  );

  --ironsworn-color-dark-alt: mix(
    $--ironsworn-color-light-muted,
    $--ironsworn-color-dark,
    40%
  );
  --ironsworn-color-dark-vivid: mix(
    $--ironsworn-color-light,
    $--ironsworn-color-dark,
    60%
  );

  --ironsworn-color-fg: var(--ironsworn-color-light);
  --ironsworn-color-fg-muted: var(--ironsworn-color-light-muted);
  --ironsworn-color-fg-highlight: var(--ironsworn-color-light-vivid);

  --ironsworn-color-border-highlight: var(--ironsworn-color-fg-highlight);
  --ironsworn-color-border: var(--ironsworn-color-fg-muted);
  --ironsworn-color-border-muted: var(--ironsworn-color-dark-alt);

  --ironsworn-color-bg: var(--ironsworn-color-dark);
  --ironsworn-color-bg-alt: var(--ironsworn-color-dark-alt);
  --ironsworn-color-bg-highlight: var(--ironsworn-color-dark-vivid);

  --ironsworn-dark-overlay: fade($--ironsworn-color-dark, 15%);
  --ironsworn-light-overlay: fade($--ironsworn-color-light, 15%);

  --ironsworn-color-input-bg: var(--ironsworn-light-overlay);

  --ironsworn-color-text-stroke: $--ironsworn-color-dark;

  // --ironsworn-color-input-bg: ;

  // see clickable.less for usage
  --ironsworn-color-clickable-text: var(--ironsworn-color-fg);
  --ironsworn-color-clickable-text-hover: var(--ironsworn-color-fg-highlight);
  --ironsworn-color-clickable-text-selected: var(
    --ironsworn-color-fg-highlight
  );

  --ironsworn-color-clickable-block-fg: var(--ironsworn-color-fg-muted);
  --ironsworn-color-clickable-block-bg: var(--ironsworn-color-bg);
  --ironsworn-color-clickable-block-border: var(--ironsworn-color-border);

  --ironsworn-color-clickable-block-fg-selected: var(
    --ironsworn-color-fg-highlight
  );
  --ironsworn-color-clickable-block-bg-selected: var(
    --ironsworn-color-bg-highlight
  );
  --ironsworn-color-clickable-block-border-selected: var(
    --ironsworn-color-fg-highlight
  );

  --ironsworn-color-clickable-block-fg-hover: var(
    --ironsworn-color-fg-highlight
  );

  --ironsworn-color-clickable-block-bg-hover: var(--ironsworn-color-bg-alt);
  --ironsworn-color-clickable-block-border-hover: var(
    --ironsworn-color-fg-highlight
  );

  --ironsworn-input-border-style: solid;

  --ironsworn-color-legacy-quests: var(--ironsworn-color-red-dark);
  --ironsworn-color-legacy-bonds: var(--ironsworn-color-purple-dark);
  --ironsworn-color-legacy-discoveries: var(--ironsworn-color-blue-dark);

  --ironsworn-color-danger: hsl(0, 80%, 50%);
  --ironsworn-color-success: hsl(290, 80%, 50%);
  --ironsworn-color-success-faded: hsl(290, 80%, 60%);

  --path-hexagon: polygon(0 25%, 50% 0, 100% 25%, 100% 75%, 50% 100%, 0 75%);
  // now that the vars are set, set the overrides to FVTT's vars that are dependent on them.

  // This could be inset, but for some reason certain states don't inherit this properly, creating an annoying 'pop' in the input hover animation.
  --ironsworn-input-border-style: solid;

  .overrideVars();

  scrollbar-color: var(--ironsworn-color-border-muted)
    var(--ironsworn-color-bg-alt);

  .app {
    color: var(--ironsworn-color-fg);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--ironsworn-color-bg-alt);
    border-color: var(--ironsworn-color-border-muted);
  }

  .window-app,
  .journal-entry .journal-entry-content {
    background: initial;
    background-color: var(--ironsworn-color-bg);
    border-width: 1px;
    border-style: solid;
  }

  color: var(--ironsworn-color-fg);
  .dialog-buttons {
    .dialog-button {
      color: currentColor;
    }
  }

  h2,
  h3 {
    color: var(--ironsworn-color-fg);
  }

  .inline-roll {
    background: var(--ironsworn-color-bg-alt);
    border-color: var(--ironsworn-color-border-muted);

    &:hover {
      text-shadow: 0 0 8px var(--ironsworn-color-fg-highlight);
    }
  }

  .window-content {
    background: var(--ironsworn-color-bg);
    background-image: none;
    color: var(--ironsworn-color-fg);
  }

  .sheet-area {
    border-color: var(--ironsworn-color-border-muted);
  }
  svg {
    color: var(--ironsworn-color-fg);
  }
  .clickable:not(svg):not(.svg) {
    &.hover,
    &:hover,
    &:focus {
      &.block {
        .textStrokeMixin();
      }
      &.text:not(.block) {
        box-shadow: none;
        &:hover {
          box-shadow: none;
        }
      }
    }
    &.selected,
    &[aria-selected='true'] {
      &.block {
        .textStrokeMixin();
      }
    }
  }

  .drag-highlight {
    background: var(--ironsworn-color-bg-highlight);
  }

  .movesheet-row.highlighted {
    background-color: var(--ironsworn-color-bg-highlight);
  }

  .asset-ironsworn .asset-ability:before {
    border-width: 1px;
    border-style: solid;
  }
  .asset-starforged .asset-ability:before {
    background-color: var(--ironsworn-color-fg);
    border-width: 1px;
    border-style: solid;
  }

  table {
    border-color: var(--ironsworn-color-border-muted);
  }

  .chat-message {
    color: var(--ironsworn-color-fg);
    background: var(--ironsworn-color-bg);
    button {
      border: none;
    }
    .dice-formula,
    .dice-total {
      background: var(--ironsworn-dark-overlay);
      // color: @text-light-color;
      border-width: 0px;
      padding: 5px 0px 5px 0px;
      .die {
        &.d6 {
          // background-image: url('systems/foundry-ironsworn/assets/icons/d6-blank.svg');
        }
        &.d10 {
          // background-image: url('systems/foundry-ironsworn/assets/icons/d10-blank.svg');
        }

        &.min {
          color: var(--ironsworn-color-fg);
        }
        &.max {
          color: var(--ironsworn-color-fg);
        }
      }
    }

    table tr {
      &.selected,
      &[aria-selected='true'] {
        background-color: var(--ironsworn-color-bg-highlight);
        color: var(--ironsworn-color-fg-highlight);

        .entity-link,
        .content-link {
          color: var(--ironsworn-color-fg-highlight);
        }
      }
    }
  }
}
